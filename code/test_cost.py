import numpy as np
import matplotlib.pyplot as plt

# path = [[1.3898187773756636, 0.9880819012406952, 2.0747074840296182], [1.579579255816842, 2.063566327159195, 1.2977232521814122], [2.2, 3.5, 2.1523369127530128], [0.9, 3.5, -1.6161262703952692], [6.4, 3.0, -0.8507174505594666], [6.3, 0.5, -1.5707963267948966]]

# path = [[1.3898187773756636, 0.9880819012406952, 2.0747074840296182], [1.3103462943467012, 1.9088105006294627, 2.420671518778441], [0.35164250744437814, 1.9088105006294627, -2.356194490192345], [0.35164250744437814, 1.0900517877899758, -1.53581448508446], [0.4, 0.4, -3.07162897016892], [0.35164250744437814, 1.0900517877899758, 1.6057781685053332], [0.35164250744437814, 1.9088105006294627, 1.4048588655934822], [0.9, 3.5, 0.5741307585956612], [6.4, 3.0, -0.8507174505594666], [6.3, 0.5, -1.5707963267948966]]
path = [[3.2, 0.4], [3.126061254838399, 0.4], [3.0521225096767974, 0.4], [2.978183764515196, 0.4], [2.9042450193535947, 0.4], [2.8303062741919933, 0.4], [2.756367529030392, 0.4], [2.6824287838687906, 0.4], [2.608490038707189, 0.4], [2.534551293545588, 0.4], [2.4606125483839865, 0.4], [2.386673803222385, 0.4], [2.3127350580607837, 0.4], [2.2387963128991824, 0.4], [2.164857567737581, 0.4], [2.0909188225759796, 0.4], [2.0169800774143782, 0.4], [1.9430413322527766, 0.4], [1.877439245958775, 0.4], [1.8202461919236952, 0.4118868247760687], [1.7725967039382415, 0.43069915820414073], [1.7082363559778873, 0.4670953619415413], [1.6540307637344576, 0.5173814614682622], [1.6085359924746958, 0.5756666553350944], [1.569808045954145, 0.6386514486932822], [1.5378206248508435, 0.7011053666193799], [1.5174870289507618, 0.7585441616298995], [1.504554938449632, 0.809327196863758], [1.490299308304405, 0.8818786616679558], [1.4481176343912188, 0.9426046398153178], [1.3898187773756636, 0.9880819012406952], [1.3541171417854698, 1.0528301155192161], [1.3381307867060588, 1.1250199658262174], [1.3360697609753198, 1.1989299800936324], [1.3431049593789117, 1.2725332681960966], [1.3559669066663447, 1.3453447257288746], [1.3725695217851268, 1.4173953413215943], [1.3916018659779796, 1.4888425799708034], [1.4122457338995151, 1.5598409514543132], [1.433971745806241, 1.63051568840254], [1.4547484696321713, 1.695604171100109], [1.4728328513625244, 1.7518669533346292], [1.4885147266862133, 1.8001512530878716], [1.511611531989588, 1.870389957666261], [1.537144609579786, 1.9397801585943832], [1.5641215722801693, 2.008621872108316], [1.601572033065258, 2.0723745271358265], [1.651355619148867, 2.1270420000308503], [1.7090833631271547, 2.173242060758619], [1.7713827049174813, 2.213063286864357], [1.8370988760114066, 2.246950200161767], [1.9053149432127605, 2.2754722304480675], [1.9749668928328672, 2.3002823886537374], [2.0458292922285084, 2.321388273803735], [2.1174396639964637, 2.3397973121090754], [2.189589180300091, 2.355964727895925], [2.262218673804819, 2.369817334485262], [2.335145271802423, 2.3820095180701686], [2.4082415310372633, 2.393139429208415], [2.4814416095635896, 2.4035647128885804], [2.554705957316457, 2.4135283158723997], [2.62802660784675, 2.42306876879073], [2.701383118976917, 2.4323294550980132], [2.7747635199921996, 2.4413988973580754], [2.8387631503650317, 2.4491129642575054], [2.8943537955110132, 2.4503917738579517], [2.9433942115992857, 2.4486016698498485], [3.017170065570299, 2.4436964270505577], [3.0850057200554373, 2.4731117634695963], [3.1378856686295076, 2.5247900865352295], [3.1755093739843323, 2.588440654729438], [3.2004908613656493, 2.6580313389069152], [3.2163569487050956, 2.7302477173027424], [3.225968208614285, 2.803559119683479], [3.2053693714961327, 2.8745705690804044], [3.193139080998254, 2.9474907859644053], [3.1865005833363083, 3.021130913509546], [3.183588500971696, 3.0950122901370425], [3.1831742155160687, 3.168949874650154], [3.184465561998562, 3.2428773422135326], [3.186639741166511, 3.3087427374146015], [3.1951895458684296, 3.36521976765706], [3.2061190934959782, 3.412772811074573], [3.2255248634083316, 3.4841195287999254], [3.207425020140197, 3.5558086751872358], [3.162093499876437, 3.6142209282395585], [3.10160791555608, 3.6567465925553244], [3.0338718699866747, 3.6863905829529027], [2.962597188568285, 3.706059284607545], [2.889698725925025, 3.718418579907904], [2.8195102867578465, 3.7251913056782056], [2.7585486711794855, 3.731305898297782], [2.7061445589756454, 3.7361626015353617], [2.6586589473469626, 3.7397342004200596], [2.5848307650456137, 3.743776171987381], [2.517650268426186, 3.731846711407201], [2.458240780201905, 3.7244598448091946], [2.4058519882663383, 3.718703507123624], [2.3595755124625084, 3.712730795523901], [2.318643130607131, 3.705458544764424], [2.282515388020729, 3.69632645944676], [2.250867787644547, 3.685135391349162], [2.2235362710247757, 3.6719461499013004], [2.2004516206144307, 3.657015173373423], [2.181575504536946, 3.6407485359677243], [2.1668435726258592, 3.62366200994262], [2.156118606666085, 3.606339833856255], [2.149156554642071, 3.5893885258780527], [2.1455889260027314, 3.573385275426644], [2.142223483021074, 3.49952316179855], [2.1663972170254784, 3.455643002941725], [2.213194683688734, 3.432744481695957], [2.2636525784945145, 3.4368907563503335], [2.3279489354223646, 3.47339988564533], [2.395699546877804, 3.5030105709377435], [2.4652790845483517, 3.5280230872770697], [2.535880721610579, 3.5499854842365504], [2.6070782960105925, 3.5699314972623855], [2.6786296654362585, 3.588568545563663], [2.7310953164105785, 3.6406674275469944], [2.79264362491821, 3.6777535643275265], [2.847977331014076, 3.7084741333692333], [2.8979101380005186, 3.732703141464598], [2.9429349878965168, 3.750700511709397], [3.013644786486162, 3.772312138660741], [3.0854101391341255, 3.754516852897773], [3.1424540836208457, 3.7074751008739777], [3.181539431178729, 3.6447114677545374], [3.206254001685165, 3.5750255434889104], [3.2211017136785145, 3.50259293008421], [3.229541004933304, 3.4291373897949367], [3.233884160086178, 3.3553263131235433], [3.235608654309563, 3.2814076811303456], [3.235646567193902, 3.2074689456888636], [3.2346370233715263, 3.133537092896289], [3.2329367932481476, 3.0596178988151856], [3.2307017876731017, 2.985712941023764], [3.228153602167941, 2.9130361674674896], [3.2318538877289003, 2.8499528247210013], [3.238177373993727, 2.795813761219167], [3.2448613383939424, 2.749483620861023], [3.2555239527265396, 2.6763177361081785], [3.2275478449478583, 2.6078759694037172], [3.173739069830562, 2.557165479794086], [3.1074884593863357, 2.5243356967938952], [3.036291170335782, 2.50438866523719], [2.963294875416412, 2.4926209567042332], [2.8896698535728955, 2.4858169729730686], [2.815830643955242, 2.4819817208154564], [2.741920772012503, 2.47991559751803], [2.6679889428819306, 2.47890432234278], [2.594051179657133, 2.4785232640978356], [2.5201124345867574, 2.478519591186808], [2.4461740276748816, 2.478743241373747], [2.372236162035599, 2.479103880777669], [2.2982987471519105, 2.4795474079916455], [2.2243616515577753, 2.480041301883084], [2.150424767729746, 2.4805659406853007], [2.0764880201506952, 2.4811094418389197], [2.002551359034366, 2.4816645805975748], [1.9286147506548792, 2.48222669927778], [1.8546781756862738, 2.4827931955125986], [1.7807416202290425, 2.4833622325869693], [1.7068050708179414, 2.4839320547101433], [1.632868531546928, 2.4845031910320063], [1.5589319945030753, 2.485074615598566], [1.484995450840884, 2.4856451831766293], [1.411058895421804, 2.4862142252080837], [1.3387627985736197, 2.4867697572177536], [1.2753941678041376, 2.481070367919369], [1.2207624840400642, 2.472782021395033], [1.174402890978154, 2.4643340884968303], [1.101704249295446, 2.45084907705592], [1.0318178290264097, 2.4749908727234318], [0.977411688193957, 2.5250599238008347], [0.9398278761999819, 2.5887340560059444], [0.9146665430462714, 2.65825991702183], [0.8989684673384384, 2.730513003150683], [0.8895937979796442, 2.803855034827516], [0.8844044797394219, 2.877611451580731], [0.8819532162515733, 2.951509552661783], [0.8814102048493458, 3.0254463038393222], [0.8821531801360804, 3.09618866202866], [0.8926213533517229, 3.1566558763913948], [0.9073278646485277, 3.2074547394577597], [0.9227859786541884, 3.2502798828866077], [0.9370172716912032, 3.286913623412211], [0.949007309919186, 3.3188092503351068], [0.9583068526481746, 3.3469993814401904], [0.9647912579307459, 3.372142520904277], [0.9685320133609162, 3.39461136490675], [0.969733076754353, 3.4145838464882807], [0.9686982755284114, 3.432124774744506], [0.9548285376715874, 3.504750998712541], [0.9076485678320092, 3.5616806788627824], [0.8375434689986341, 3.585179894884492], [0.7656620816588483, 3.5678592658491497], [0.7106635524212308, 3.5184416594950254], [0.6781555268709722, 3.452032576449888], [0.6644132161141084, 3.3793821330160445], [0.6637441560161941, 3.305446415026309], [0.6715622147228366, 3.231922160564725], [0.6848548353509012, 3.1591880951420457], [0.7016950649463096, 3.087192645957766], [0.7208646377180252, 3.0157821039081347], [0.741594324842304, 2.9448087419488633], [0.7626397574174891, 2.876626652084024], [0.776535583060442, 2.816276498001284], [0.7862948047877313, 2.763813415109105], [0.7986048587179263, 2.6909066211300257], [0.8429067846029654, 2.631709683718123], [0.9046703210308531, 2.5910623762551035], [0.9739404268364914, 2.5652052596767234], [1.0461020847840126, 2.5490921234724584], [1.1193436369552006, 2.5389623124363423], [1.1929923272663603, 2.5324194956482042], [1.2667995072565186, 2.5280106162018323], [1.3406715087027608, 2.524869686658105], [1.4145717225596794, 2.5224829675766136], [1.4884850865144854, 2.5205457879368693], [1.5624050022854128, 2.5188772291302133], [1.6363283762746035, 2.517369643601464], [1.710253660412579, 2.5159588278119918], [1.784180035551837, 2.514606387483557], [1.858107048919875, 2.5132892957805346], [1.932034442114479, 2.5119936988051363], [2.0059620642674485, 2.5107112328679575], [2.0798898258537264, 2.509436829903943], [2.1538176731101943, 2.5081674063746937], [2.2277455734465215, 2.506901077849264], [2.30167350695033, 2.5056366871150466], [2.3756014613676135, 2.5043735197673413], [2.449529429104685, 2.5031111322124406], [2.5234574054226817, 2.5018492472739444], [2.59738538734286, 2.5005876905839695], [2.671313372978913, 2.4993263516652933], [2.7452413611275444, 2.4980651600192396], [2.8151839766719884, 2.496872054292129], [2.875782245801593, 2.494915978005132], [2.92787603128836, 2.4927572994263416], [3.0017382933254644, 2.489395115190709], [3.075665899492762, 2.4906785022894615], [3.149487161215875, 2.4948449580590424], [3.223185077041611, 2.5008077794562493], [3.2967830926736093, 2.5078979226920626], [3.370308844393065, 2.5157018877202533], [3.4437846814039728, 2.523962602678341], [3.517221869031562, 2.532560131941013], [3.587646612156748, 2.510036952950829], [3.646422055359988, 2.465177335115464], [3.6929871931150773, 2.4077436691875276], [3.7298089622219903, 2.3436258451764975], [3.7596055981915524, 2.275956808527749], [3.7844748495734866, 2.2063259362671315], [3.806363770216418, 2.1357014844875977], [3.8264845887004766, 2.0645531134619457], [3.8434755442432667, 1.9996309850813667], [3.851061603194774, 1.9391838945976863], [3.8535191723288182, 1.8844167372083913], [3.8542196014191257, 1.8104813097384584], [3.893679384484436, 1.7479524079688695], [3.957669614805318, 1.7109093457364792], [4.031607232099044, 1.7113177389278342], [4.105109968372945, 1.7032998965546282], [4.177797522883555, 1.6897552498135975], [4.2497053196459875, 1.6725445903013954], [4.321011998400508, 1.6529922093448017], [4.384658703103698, 1.6339668433373475], [4.440541422717756, 1.6213449950154992], [4.488909656215144, 1.6123204432172065], [4.561758454432037, 1.5996717027887415], [4.622868402879727, 1.558048245017997], [4.6681616414714435, 1.49960630311027], [4.700104940787949, 1.4329237441848033], [4.722535098647905, 1.362469318813151], [4.73806951660015, 1.2901808695632382], [4.748780657687556, 1.2170220731496972], [4.756031379442108, 1.1434397038611896], [4.760256762117045, 1.0769745760368072], [4.765477704585201, 1.0199266449400566], [4.770284007065559, 0.9709842586814186], [4.777135799088627, 0.8973636706496398], [4.770716334724565, 0.8321526063655986], [4.765831396719911, 0.7752401082190388], [4.760749494052927, 0.7257861435517187], [4.754515833292029, 0.6829932941278731], [4.746732506373784, 0.6462034068991743], [4.737387638077242, 0.6148921871834204], [4.726727173181028, 0.588619686969799], [4.715153975801787, 0.5669722656780289], [4.70314274087145, 0.5495166131179652], [4.6911669369180835, 0.5357765485844147], [4.636605221685096, 0.48587707697492083], [4.5642917985010945, 0.4704593318906431], [4.494970665627343, 0.4961793352571281], [4.463289272278574, 0.5355831120074941], [4.458841976394764, 0.5868114562940666], [4.478774311440631, 0.6317038280474297], [4.53277000664466, 0.6822152419605828], [4.581097190431265, 0.7381743461647062], [4.6255164095984975, 0.7972833218337668], [4.667312631486768, 0.858275238281266], [4.70736251643674, 0.9204278307578975], [4.746245653710096, 0.9833169369039834], [4.7843417385207045, 1.0466859068985728], [4.821604547202541, 1.1105484242715447], [4.854799346891574, 1.1679655792787222], [4.879648795847311, 1.2195961109531146], [4.898945434232337, 1.2648229909714206], [4.926573277362498, 1.3334060815991218], [4.977306077749796, 1.3871938218466429], [5.040378111558891, 1.4257795262882722], [5.109016939030489, 1.4532686041083156], [5.1803427241050075, 1.472751171176748], [5.252984714661943, 1.486538094111125], [5.32632702916002, 1.4959105505734018], [5.399991773759706, 1.5022700662102508], [5.473801914905257, 1.5066290913473714], [5.547678121851971, 1.509669499747352], [5.621587189199344, 1.511764207343585], [5.695511772119467, 1.5132112996551468], [5.75944767920716, 1.5140760205078734], [5.814390297434066, 1.5197956743601613], [5.861207981468334, 1.5272602695304742], [5.933968213151132, 1.540408909062299], [6.004415174381823, 1.5179553193841662], [6.061852431587067, 1.4713946114770604], [6.10548113858256, 1.4116997711474832], [6.138353879224481, 1.3454704652568035], [6.1637321309743305, 1.2760234899865044], [6.184090302892435, 1.2049426706874475], [6.201116953142138, 1.1329910812863333], [6.2159218318216745, 1.060549700823531], [6.229225407703346, 0.9878176383968895], [6.241346106431942, 0.9157846859258274], [6.2525836973201665, 0.8532914465421558], [6.262487792800674, 0.7994603430410642], [6.270883897502653, 0.7533448975220918], [6.27778431953409, 0.7140055561557764], [6.283312619894925, 0.6805559701499079], [6.2876470520773475, 0.6521869430066852], [6.290982326174083, 0.6281755792527666], [6.293506264830934, 0.6078855742352499], [6.295387314169817, 0.5907626761593726], [6.302434070951457, 0.517160493753328], [6.2752262001736145, 0.44840971336642244], [6.216780740752811, 0.40312101379176607], [6.143164850640868, 0.39621893011373555], [6.076282499286631, 0.42774176490695615], [6.029115451912287, 0.4846821519627065], [6.002184709418627, 0.5535419598684247], [5.99057770094762, 0.6265639797694533], [5.989290934254051, 0.700491527189536], [5.994715319800827, 0.7742310286627097], [6.004474612281837, 0.8475228716354605], [6.017062874220217, 0.920382144878082], [6.031511846134641, 0.9928953522729316], [6.047217457881405, 1.0651468006717848], [6.062650913785147, 1.1322364837307308], [6.082660640585376, 1.188387244933721], [6.10344328632645, 1.2352488440372464], [6.136024614560585, 1.301621994381131], [6.13296975540085, 1.3754976051846055], [6.102096618543203, 1.4426823315488708], [6.053997307391962, 1.4988374230620043], [5.99623621211248, 1.5449957799238647], [5.93313503925891, 1.583533813352882], [5.867019043848969, 1.6166338614952176], [5.799122252897204, 1.6459078057891554], [5.7335591082204935, 1.671148828959288], [5.674637755656887, 1.6866668144808505], [5.623027201957851, 1.6963560796207757], [5.549867844366505, 1.7070633870738119], [5.4877976412629526, 1.7472408424780066], [5.443245855685282, 1.806249964128083], [5.414314820080756, 1.8742935767226678], [5.397367620433206, 1.9462639210332124], [5.387375168072895, 2.019524339622647], [5.378528340319163, 2.0929319119484506], [5.3724988257562645, 2.166624401322932], [5.3682383554022834, 2.240440296822716], [5.365139580174902, 2.3143140785599634], [5.3600298287331904, 2.3880760503088], [5.353585886419497, 2.461733457563808], [5.3462568315358565, 2.5353080658915785], [5.338495594815996, 2.607182142585213], [5.32400700694406, 2.6707877146176173], [5.310202173505356, 2.7256543529715596], [5.298573355543662, 2.7731456657123297], [5.283263124382523, 2.8454819281113832], [5.306540503641545, 2.91566099657844], [5.3569489642766195, 2.9697528178869748], [5.421462676383156, 3.005876480302451], [5.492048802942182, 3.027888676318875], [5.564959412551497, 3.0401761106511636], [5.638663755745621, 3.046058952684998], [5.693137543148281, 3.047316877663799], [5.7513757677056505, 3.0687390306379885], [5.808433142014895, 3.1157644926028327], [5.877615038265666, 3.141856699623702], [5.950993581081781, 3.1509411638487244], [6.021507345107132, 3.147678419766858], [6.083153314461556, 3.146983559568665], [6.13686907705583, 3.146516918315073], [6.183622490432602, 3.144890580307392], [6.224221601391879, 3.1414058391797113], [6.259278356172881, 3.135843646409967], [6.289248566670214, 3.1283140110166836], [6.31449933586282, 3.1191469738659046], [6.3353759741131865, 3.1088062623990904], [6.352252364119249, 3.0978137520412545], [6.365556153215544, 3.0866817131167195]]
def plot_nm_path(ax, path):
    path_x = []
    path_y = []
    path_theta = []
    for path_i in path[1:-1]:
        ax.plot(path_i[0], path_i[1], marker='o', color='b', markersize=5, zorder=41)
        path_x.append(path_i[0])
        path_y.append(path_i[1])
        # path_theta.append(path_i[2])
    ax.plot(path[-1][0], path[-1][1], marker='o', color='b', markersize=5, zorder=41)
    path_x.append(path[-1][0])
    path_y.append(path[-1][1])
    # path_theta.append(path[-1][2])
    # print("final waypoint", self.path[-1])
    # for i in range(len(path_x)):
    #     ax.quiver(path_x[i], path_y[i], np.cos(path_theta[i]), np.sin(path_theta[i]), units='xy', width=0.05,
    #               headwidth=3.3, scale=1 / 0.5, color='red', zorder=2)
    near_path_x = [path[0][0], path[1][0]]
    near_path_y = [path[0][1], path[1][1]]
    ax.plot(near_path_x, near_path_y, ':', color='gold', linewidth=2.0, zorder=40)
    ax.plot(path_x, path_y, '-', color='gold', linewidth=2.0, zorder=40)

fig = plt.figure(figsize=(9, 6))
ax = fig.add_subplot(111)

plot_nm_path(ax, path)

dis_cost = 0.0
# rot_cost = 0.0
for i in range(0, len(path) - 1):
    dis_cost = dis_cost + np.sqrt((path[i + 1][0] - path[i][0]) ** 2 + (path[i + 1][1] - path[i][1]) ** 2)
    # theta_i = np.arctan2(path[i + 1][1] - path[i][1], path[i + 1][0] - path[i][0])
    # rot_cost = rot_cost + abs(theta_i - path[i][2])

print("dis_cost", dis_cost)
# print("rot_cost", rot_cost)
# print("total_cost", dis_cost + rot_cost)
plt.show()